form#member-details(onsubmit='onSubmit(); return false')
  h3 Hakijan tiedot

  label(for='firstNames') Etunimet
  input#firstNames(type='text', placeholder='Etunimet', autofocus=true, required=true)

  label(for='lastName') Sukunimi
  input#lastName(type='text', placeholder='Sukunimi', required=true)

  label(for='address') Osoite
  textarea#address(rows='4', placeholder='Postiosoite', required=true)

  label(for='birth-date') Syntymäaika

  select#birth-date
    option(value='1') 1.
    option(value='2') 2.
    option(value='3') 3.
    option(value='4') 4.
    option(value='5') 5.
    option(value='6') 6.
    option(value='7') 7.
    option(value='8') 8.
    option(value='9') 9.
    option(value='10') 10.
    option(value='11') 11.
    option(value='12') 12.
    option(value='13') 13.
    option(value='14') 14.
    option(value='15') 15.
    option(value='16') 16.
    option(value='17') 17.
    option(value='18') 18.
    option(value='19') 19.
    option(value='20') 20.
    option(value='21') 21.
    option(value='22') 22.
    option(value='23') 23.
    option(value='24') 24.
    option(value='25') 25.
    option(value='26') 26.
    option(value='27') 27.
    option(value='28') 28.
    option(value='29') 29.
    option(value='30') 30.
    option(value='31') 31.

  select#birth-month
    option(value='1') tammikuuta
    option(value='2') helmikuuta
    option(value='3') maaliskuuta
    option(value='4') huhtikuuta
    option(value='5') toukokuuta
    option(value='6') kesäkuuta
    option(value='7') heinäkuuta
    option(value='8') elokuuta
    option(value='9') syyskuuta
    option(value='10') lokakuuta
    option(value='11') marraskuuta
    option(value='12') joulukuuta

  input#birth-year(type='number', placeholder='Vuosi', required=true)

  label(for='phone') Puhelinnumero
  input#phone(type='tel', placeholder='Puhelinnumero')

  label(for='email') Sähköpostiosoite
  input#email(type='email', placeholder='Sähköposti')

  h3 Huoltajan tiedot

  p Täytettävä, jos hakija on alle 18-vuotias.

  label(for='huoltaja-name') Huoltajan nimi
  input#huoltaja-name(type='text', placeholder='Huoltajan nimi')

  label(for='huoltaja-phone') Huoltajan puhelinnumero
  input#huoltaja-phone(type='tel', placeholder='Huoltajan puhelinnumero')

  label(for='huoltaja-email') Huoltajan sähköpostiosoite
  input#huoltaja-email(type='email', placeholder='Huoltajan sähköposti')

  label(for='photo-publication-ok') Valokuvien verkkojulkaisu
  table
    tr
      td
        input#photo-publication-ok(type='checkbox')
      td
        span.small Annan lippukunnalle luvan julkaista lapsestani partiotapahtumissa otettuja valokuvia internetissä (Facebook, kotisivut jne.).

  h3 Lisätiedot

  textarea#details(placeholder='Vapaa lisätietokenttä. Onko kysyttävää, haluatko meidän ottavan yhteyttä, tms.?')

  button#submit(type='submit') Lähetä hakemus

p#submit-result

h3 Rekisteriseloste

p
  | Syöttämäsi tiedot tallennetaan Suomen Partiolaisten sähköiseen jäsenrekisteriin. Henkilötietolain 10 §:n mukainen
  a(href="https://www.partio.fi/wp-content/uploads/2019/09/J%C3%A4senten-ja-huoltajien-tiedot-tietosuojaseloste.pdf") rekisteriseloste on saatavilla SP:n sivuilla.

script.
  var onSubmit = function() {
    var $form = document.getElementById("member-details")
    var $button = document.getElementById("submit")
    var $result = document.getElementById("submit-result")

    var checked = function(id) {
      return document.getElementById(id).checked
    }

    var value = function(id) {
      return document.getElementById(id).value
    }

    var showResult = function(id) {
      $result.style.display = "block"
    }

    var send = function() {
      var url = "https://ez2mbhuenk.execute-api.eu-central-1.amazonaws.com/prod/member"

      var params = {
        firstNames: value("firstNames"),
        lastName: value("lastName"),
        address: value("address"),
        dateOfBirth: value("birth-date") + "." + value("birth-month") + "." + value("birth-year"),
        phone: value("phone"),
        email: value("email"),
        huoltajaName: value("huoltaja-name"),
        huoltajaPhone: value("huoltaja-phone"),
        huoltajaEmail: value("huoltaja-email"),
        details: value("details"),
        photoPublicationOk: checked("photo-publication-ok") ? "Kyllä" : "Ei"
      }

      var fail = function() {
        $result.style.color = "red"
        $button.disabled = false
        $form.style.opacity = 1
        $result.innerHTML = "Hups, jotain meni pieleen tietojen tallennuksessa. Koita hetken kuluttua uudelleen tai ota meihin yhteyttä."
        showResult()
      }

      var succeed = function() {
        $result.style.color = "green"
        $result.innerHTML = "Kiitos, ja tervetuloa partioon! :) Hakemuksesi on lähetetty jäsenrekisterin hoitajalle."
        showResult()
      }

      var xhr = new XMLHttpRequest()
      xhr.open("POST", url, true)
      xhr.setRequestHeader("Content-type", "application/json; charset=utf-8")

      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          (xhr.status === 200 ? succeed : fail)()
        }
      }
      xhr.send(JSON.stringify(params))
    }

    $button.disabled = true
    $form.style.opacity = .3
    $result.style.color = "#000"
    $result.innerHTML = "Hakemusta lähetetään..."
    send()
    return false
  }
